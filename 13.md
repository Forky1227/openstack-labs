---
date: "2016-10-09"
draft: false
weight: 130
title: "Lab XX - WORK ME! Administering OpenStack with Groups and Domains"
---
[Click here to find out more about Alta3 Research's Openstack Training](https://alta3.com/courses/openstack)

### TUESDAY - &#x2B50;REQUIRED&#x2B50;

### Lab Objective

The objective of this lab is to create and work with groups and domains. These are both highly flexible concepts. Groups are designed to manage access and assign roles to multiple members at once. The group does not contain  some number of users, all of which you'd like to inheret some common permissions. Once again, back to our story. Time to take a third order.

   - **Order 3:** The Shire would like to have their level 50 wizard, Gandalf the Grey, setup in a new project, and be able to admin a small cloud for their company.

### Procedure

0. We don't need any old terminal windows open, so close them all, and then open a new one. Once you have a new terminal window open, SSH to controller. 

    `student@beachhead:/$` `ssh controller`

0. The CLI prompt should now read as follows:

    `student@controller:~$`

0. Issue the following command to allow you to issue commands to OpenStack as admin.

    `[student@controller]#` `source admin.rc`

0. Start the python-openstackclient.
	
    `student@controller (admin) :~$`  `openstack`

	> Within the python-openstackclient, you'll be issuing commands as admin since the admin permissions were set when you executed `openstack`

4. Get a sense of the commands you can issue (they're exactly the same as before):

	`(openstack)` `help`
	
	```
	compute service list    object save                   token issue                                                                                           |
    compute service set     object show                   token revoke                                                                                          |
	console log show        project create                usage list                                                                                            |
	console url show        project delete                usage show                                                                                            |
	container create        project list                  user create                                                                                           |
	container delete        project set                   user delete                                                                                           |
	container list          project show                  user list                                                                                             |
	container save          project usage list            user role list                                                                                        |
	container show          quota set                     user set                                                                                              |
	ec2 credentials create  quota show                    user show                                                                                             |	
	ec2 credentials delete  role add                      volume create                                                                                         |
	ec2 credentials list    role create                   volume delete                                                                                         |
	ec2 credentials show    role delete                   volume list                                                                                           |
	endpoint create         role list                     volume set                                                                                            |
	endpoint delete         role remove                   volume show                                                                                           |
	endpoint list           role show                     volume type create                                                                                    |
	endpoint show           security group create         volume type delete                                                                                    |
	extension list          security group delete         volume type list                                                                                      |
	flavor create           security group list           volume type set                                                                                       |
	flavor delete           security group rule create    volume type unset                                                                                     |
	flavor list             security group rule delete    volume unset                                                                                          |
	flavor set              security group rule list                                                                                                            |
	flavor show             security group set                                                                                                                  |
	flavor unset            security group show                                                                                                                 |
	help                    server add security group                                                                                                           |
	host list               server add volume                                                                                                                   |
	host show               server create                                                                                                                       |
	hypervisor list         server delete                                                                                                                       |
	hypervisor show         server image create                                                                                                                 |
	hypervisor stats show   server list                                                                                                                         |
	image create            server lock                                                                                                                         |
	image delete            server migrate                                                                                                                      |
	image list              server pause                                                                                                                        |
	image save              server reboot                                                                                                                       |
	image set               server rebuild                                                                                                                      |
	image show              server remove security group                                                                                                        |
	ip fixed add            server remove volume
    ```
	
	
0. Issue the following commands to create a project for The Shire.

   `(openstack)` `project create --domain default the_shire`

0. Create the user `gandalf` with the password `noneshallpass` within the `default` domain.

   `(openstack)` `user create --project the_shire --password noneshallpass --email gandalf@theshire.example --domain default gandalf`

0. Define a role for the user `gandalf`

   `(openstack)` `role add --project the_shire --user gandalf user`
	
0. Exit the OpenStack-python environment, and return ot the CLI.

   `(openstack)` `exit`

0. Confirm that creation of the Gandalf user was successful by logging into the Horizon interface (http://controller/horizon) as `default`:`gandalf`:`noneshallpass`
